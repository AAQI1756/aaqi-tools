
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Profit/Loss Calculator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* General Body and Layout Styling */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f9;
            color: #333;
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }

        .container {
            max-width: 960px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header Section */
        header {
            text-align: center;
            padding: 40px 20px;
            background-color: #fff;
            border-bottom: 1px solid #ddd;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        header h1 {
            font-size: 2.5em;
            color: #2c3e50;
            margin: 0;
        }

        header p {
            color: #7f8c8d;
            margin-top: 10px;
            font-size: 1.1em;
        }

        /* Section Styling */
        section {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            transition: background-color 0.3s, box-shadow 0.3s;
        }

        section h2 {
            font-size: 1.5em;
            color: #34495e;
            border-bottom: 2px solid #ecf0f1;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        .input-group {
            margin-bottom: 15px;
            animation: fadeIn 0.8s ease-in-out;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }

        .input-group input[type="number"],
        .input-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
            font-size: 1em;
            transition: border-color 0.3s, transform 0.2s;
        }

        .input-group input[type="number"]:focus,
        .input-group select:focus {
            outline: none;
            border-color: #3498db;
            transform: scale(1.01);
        }

        /* Results Section - NEW DESIGN */
        .results-section {
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            background-color: #e8f5e9;
            border: 2px solid #4caf50;
            animation: slideInUp 0.8s ease-in-out;
        }
        
        .results-list {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            text-align: left;
            margin-bottom: 20px;
        }
        
        .results-list p {
            margin: 0;
            padding: 5px 0;
            border-bottom: 1px dashed #ddd;
        }
        
        .results-list .value {
            text-align: right;
            font-weight: bold;
        }

        .final-result {
            text-align: center;
            padding-top: 15px;
            border-top: 2px solid #3498db;
        }

        .final-result h3 {
            font-size: 1.5em;
            margin: 0 0 5px;
            color: #2c3e50;
        }
        
        .final-result p {
            font-size: 2em;
            font-weight: bold;
            margin: 0;
            color: #1b5e20;
        }

        .results-section.loss {
            background-color: #ffcdd2;
            border-color: #c62828;
            color: #c62828;
        }
        
        .results-section.loss .final-result p {
            color: #c62828;
        }

        .results-section.break-even {
            background-color: #fff3e0;
            border-color: #ff9800;
            color: #ff9800;
        }
        
        .results-section.break-even .final-result p {
            color: #ff9800;
        }

        /* Disclaimer Section */
        .disclaimer {
            font-size: 0.9em;
            color: #777;
            text-align: justify;
            margin-top: 20px;
        }

        /* Animation Keyframes */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Responsive Design (for smaller screens) */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            header {
                padding: 20px 10px;
                border-radius: 0;
            }
            header h1 {
                font-size: 2em;
            }
            .results-list {
                grid-template-columns: 1fr;
            }
        }
        
        /* Dark Mode Styles */
        body.dark-mode {
            background-color: #121212;
            color: #e0e0e0;
        }

        body.dark-mode header { background-color: #1e1e1e; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3); }
        body.dark-mode header h1 { color: #fff; }
        body.dark-mode header p { color: #b0b0b0; }
        body.dark-mode section { background-color: #1e1e1e; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3); }
        body.dark-mode section h2 { color: #fff; border-bottom-color: #333; }
        body.dark-mode .input-group label { color: #ccc; }
        body.dark-mode .input-group input[type="number"], body.dark-mode .input-group select { background-color: #333; border-color: #555; color: #e0e0e0; }
        body.dark-mode .results-section { background-color: #0e351b; border-color: #2e7d32; }
        body.dark-mode .results-section h3 { color: #4caf50; }
        body.dark-mode .results-section .final-result p { color: #4caf50; }
        body.dark-mode .results-section.loss { background-color: #420f13; border-color: #c62828; }
        body.dark-mode .results-section.loss h3, body.dark-mode .results-section.loss .final-result p { color: #ffcdd2; }
        body.dark-mode .results-section.break-even { background-color: #3d2f09; border-color: #ff9800; }
        body.dark-mode .results-section.break-even h3, body.dark-mode .results-section.break-even .final-result p { color: #ff9800; }
        body.dark-mode .disclaimer { color: #aaa; }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1>Stock Profit/Loss Calculator</h1>
            <p>Estimate your net profit after fees and taxes.</p>
        </header>

        <section>
            <h2>Transaction Details</h2>
            <div class="input-group">
                <label for="purchase-price">Purchase Price per Share</label>
                <input type="number" id="purchase-price" placeholder="Enter purchase price" oninput="calculateProfit()">
            </div>
            <div class="input-group">
                <label for="sale-price">Sale Price per Share</label>
                <input type="number" id="sale-price" placeholder="Enter sale price" oninput="calculateProfit()">
            </div>
            <div class="input-group">
                <label for="number-of-shares">Number of Shares</label>
                <input type="number" id="number-of-shares" placeholder="Enter number of shares" oninput="calculateProfit()">
            </div>
        </section>

        <section>
            <h2>Brokerage Fee & Tax</h2>
            <div class="input-group">
                <label for="fee-type">Fee Type</label>
                <select id="fee-type" onchange="toggleFeeInput()">
                    <option value="percentage">Percentage (%)</option>
                    <option value="fixed">Fixed amount per share</option>
                </select>
            </div>
            <div class="input-group" id="fee-percentage-input">
                <label for="fee-percentage">Fee Rate (e.g., 0.15 for 0.15%)</label>
                <input type="number" id="fee-percentage" placeholder="Enter percentage fee rate" oninput="calculateProfit()" value="0.15">
            </div>
            <div class="input-group" id="fee-fixed-input" style="display: none;">
                <label for="fee-fixed">Fixed Fee per Share</label>
                <input type="number" id="fee-fixed" placeholder="Enter fixed fee per share" oninput="calculateProfit()" value="0.05">
            </div>
            <div class="input-group">
                <label for="tax-applicable">Tax Applicable?</label>
                <select id="tax-applicable" onchange="toggleTaxOptions()">
                    <option value="no">No</option>
                    <option value="yes">Yes</option>
                </select>
            </div>
            <div id="tax-options" style="display: none;">
                <div class="input-group">
                    <label for="tax-status">Tax Status</label>
                    <select id="tax-status" onchange="calculateProfit()">
                        <option value="filer">Filer</option>
                        <option value="non-filer">Non-Filer</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="tax-rate">Capital Gains Tax Rate (%)</label>
                    <input type="number" id="tax-rate" placeholder="e.g., 15" oninput="calculateProfit()" value="15">
                </div>
            </div>
        </section>

        <section class="results">
            <h2>Calculation Summary</h2>
            <div id="results-box" class="results-section">
                <div class="results-list">
                    <p>Share Buy Price:</p> <p class="value" id="buy-price">0.00</p>
                    <p>Shares:</p> <p class="value" id="buy-shares">0</p>
                    <p>Buy Fees:</p> <p class="value" id="buy-fees">0.00</p>
                    <p>Sale Price:</p> <p class="value" id="sale-price-summary">0.00</p>
                    <p>Shares:</p> <p class="value" id="sale-shares">0</p>
                    <p>Sale Fees:</p> <p class="value" id="sale-fees">0.00</p>
                    <p>Tax:</p> <p class="value" id="tax-summary">0.00</p>
                </div>
                <div class="final-result">
                    <h3>Gross Profit: <span id="gross-profit">0.00</span></h3>
                    <h3>Total Fees: <span id="total-fees">0.00</span></h3>
                    <h3>Total Tax: <span id="total-tax">0.00</span></h3>
                    <p>Net Profit/Loss: <span id="net-result">0.00</span></p>
                </div>
            </div>
            <div class="disclaimer">
                <p><strong>Disclaimer:</strong> This calculator provides an estimation of your stock transaction results. It does not account for all potential taxes (like sales tax on brokerage) or market variables. For precise financial advice, please consult a professional investment advisor or tax consultant.</p>
            </div>
        </section>
    </div>

    <script>
        function calculateProfit() {
            const purchasePrice = parseFloat(document.getElementById('purchase-price').value) || 0;
            const salePrice = parseFloat(document.getElementById('sale-price').value) || 0;
            const numberOfShares = parseFloat(document.getElementById('number-of-shares').value) || 0;
            const feeType = document.getElementById('fee-type').value;
            const taxApplicable = document.getElementById('tax-applicable').value;

            // Fee Calculation
            let buyFees = 0;
            let saleFees = 0;
            if (feeType === 'percentage') {
                const feePercentage = parseFloat(document.getElementById('fee-percentage').value) / 100 || 0;
                buyFees = (purchasePrice * numberOfShares) * feePercentage;
                saleFees = (salePrice * numberOfShares) * feePercentage;
            } else { // Fixed fee per share
                const feeFixed = parseFloat(document.getElementById('fee-fixed').value) || 0;
                buyFees = feeFixed * numberOfShares;
                saleFees = feeFixed * numberOfShares;
            }
            const totalFees = buyFees + saleFees;

            // Gross Profit Calculation
            const grossProfit = (salePrice * numberOfShares) - (purchasePrice * numberOfShares);

            // Tax Calculation (Capital Gains Tax)
            let totalTax = 0;
            if (taxApplicable === 'yes') {
                const taxRate = parseFloat(document.getElementById('tax-rate').value) / 100 || 0;
                const taxableGain = grossProfit - totalFees;
                if (taxableGain > 0) {
                    totalTax = taxableGain * taxRate;
                }
            }

            // Net Profit/Loss
            const netResult = grossProfit - totalFees - totalTax;

            // Display Results
            document.getElementById('buy-price').textContent = purchasePrice.toFixed(2);
            document.getElementById('buy-shares').textContent = numberOfShares;
            document.getElementById('buy-fees').textContent = buyFees.toFixed(2);
            document.getElementById('sale-price-summary').textContent = salePrice.toFixed(2);
            document.getElementById('sale-shares').textContent = numberOfShares;
            document.getElementById('sale-fees').textContent = saleFees.toFixed(2);
            document.getElementById('tax-summary').textContent = totalTax.toFixed(2);

            document.getElementById('gross-profit').textContent = grossProfit.toFixed(2);
            document.getElementById('total-fees').textContent = totalFees.toFixed(2);
            document.getElementById('total-tax').textContent = totalTax.toFixed(2);
            document.getElementById('net-result').textContent = netResult.toFixed(2);

            // Change result box style based on profit/loss
            const resultsBox = document.getElementById('results-box');
            resultsBox.classList.remove('loss', 'break-even');
            if (netResult > 0) {
                resultsBox.classList.add('profit');
                resultsBox.style.backgroundColor = '#e8f5e9';
                resultsBox.style.borderColor = '#4caf50';
            } else if (netResult < 0) {
                resultsBox.classList.add('loss');
                resultsBox.style.backgroundColor = '#ffcdd2';
                resultsBox.style.borderColor = '#c62828';
            } else {
                resultsBox.classList.add('break-even');
                resultsBox.style.backgroundColor = '#fff3e0';
                resultsBox.style.borderColor = '#ff9800';
            }
        }

        function toggleFeeInput() {
            const feeType = document.getElementById('fee-type').value;
            document.getElementById('fee-percentage-input').style.display = feeType === 'percentage' ? 'block' : 'none';
            document.getElementById('fee-fixed-input').style.display = feeType === 'fixed' ? 'block' : 'none';
            calculateProfit();
        }

        function toggleTaxOptions() {
            const taxApplicable = document.getElementById('tax-applicable').value;
            document.getElementById('tax-options').style.display = taxApplicable === 'yes' ? 'block' : 'none';
            calculateProfit();
        }

        document.addEventListener('DOMContentLoaded', () => {
            toggleFeeInput();
            toggleTaxOptions();
            calculateProfit();
        });
    </script>

</body>
</html>
